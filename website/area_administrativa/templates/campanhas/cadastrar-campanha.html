{% extends 'base.html' %}
{% load static %}
{% block 'title' %}Cadastrar Campanha{% endblock %}
{% block 'conteudo' %}
{% if messages %}
{% for message in messages %}
    <section class="alert {{ message.tags }}">
        {{ message }}
    </section>
{% endfor %}
{% endif %}

<h2>Cadastrar campanha</h2>
<form class="formulario" method="POST" enctype="multipart/form-data">
  {% csrf_token %}
  <input type="hidden" name="user" value={{user.username}}>
  <label>Nome:</label><br>
  <input class="pergunta" type="text" name="nome_campanha" required><br>
  <label>Descrição:</label><br>
  <input class="pergunta" type="text" name="descricao" required><br>

    <label>Carregar imagem:</label><br>
    <input type="file" class="pergunta" name="imagem_de_capa" id="imagem_de_capa" accept="image/*"><br>

    <label>Imagem de perfil:</label><br>
    <img style="width: 500px;" height="500px" id="preview" class="pergunta"
        src="{% if campanha.imagem_de_capa %}{{ campanha.imagem_de_capa.url }}{% else %}{% static 'img/default-avatar.jpg' %}{% endif %}"
        alt="Avatar do Personagem" /><br>


  <!-- <label>Imagem:</label><br>
  <input class="pergunta" type="file" name="imagem_de_capa" required><br> -->
  <label>data de inicio:</label><br>
  <input class="pergunta" type="date" name="data_inicio"><br>
  <label>data do fim:</label><br>
  <input class="pergunta" type="date" name="data_fim"><br>
<br>

  <button  type="submit" class="botao">Cadastrar Campanha</button>
</form>

<script>
document.getElementById('imagem_de_capa').addEventListener('change', function(event) {

    const file = event.target.files[0];
    const preview = document.getElementById('preview');

    if (file) {
        preview.src = URL.createObjectURL(file);
        preview.onload = () => {
            URL.revokeObjectURL(preview.src);
        }
    }
});
</script>
{% endblock %}