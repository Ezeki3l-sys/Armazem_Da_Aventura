{% extends 'base.html' %}
{% load static %}

{% block 'conteudo' %}
<div class="container">
    {% if messages %}
        {% for message in messages %}
        <br>
            <section class="alert {{message.tags}}">
                {{message}}
            </section>
        {% endfor %}
    {% endif %}    
    {{usuario_dados}}
<h2>Registrar Usu치rio</h2>
{% if erro %}<p style="color:red;">{{ erro }}</p>{% endif %}
  <form  method="post" class="formulario"  enctype="multipart/form-data"> {% csrf_token %}
    <br>
    <input type="hidden" name="user" value={{user.username}}>
    <label>Username:</label><br>
    <input type="text" class="pergunta" name="username" id="username" placeholder="Username" value="{{usuario_dados.username}}" required><br>
    
    <label>Carregar imagem:</label><br>
    <input type="file" class="pergunta" name="avatar" id="avatar" accept="image/*" required><br>

    <label>Imagem de perfil:</label><br>
    <img  id="preview" class="preview_img"
        src="{% if usuario_dados.avatar %}{{ usuario_dados.avatar.url }}{% else %}{% static 'img/default-avatar.jpg' %}{% endif %}"
        alt="Avatar do usu치rio" /><br>
    
    
    <label>Email:</label><br>
    <input type="email" class="pergunta" name="email" id="email" value="{{usuario_dados.email}}" required placeholder="seu_email@gmail.com"><br>
    <label>Senha:</label><br>
    <input type="password" class="pergunta" value="{{usuario_dados.senha}}" name="password1" id="senha" placeholder="Insira sua senha..." required><br>
    <label>Confirme sua senha:</label><br>
    <input type="password" class="pergunta" name="password2" id="senha2" placeholder="Confirme sua senha... " required><br>
    <label>Eh mestre?:</label><br>
    <input class="form-check-input" type="checkbox" name="eh_mestre"  id="myCheckboxMestre" {% if usuario_dados.mestre %}checked{% endif %} value="mestre"><br>
    <textarea  class="pergunta" placeholder="Biografia..." name="bio" id="bio" cols="30" rows="10"></textarea><br>
    <label for="data" class="form-label">Data</label><br>
    <input  type="date" class="pergunta" name="data" id="data" placeholder="..." required><br>
    
    <button class="botao" type="submit">Cadastrar usu치rio</button> 
    <br>
      <a href="{% url 'accounts:login' %}">J치 tenho conta</a>
      <br>
      <br>
  </form>
</div>

<script>
document.getElementById('avatar').addEventListener('change', function(event) {

    const file = event.target.files[0];
    const preview = document.getElementById('preview');

    if (file) {
        preview.src = URL.createObjectURL(file);
        preview.onload = () => {
            URL.revokeObjectURL(preview.src);
        }
    }
});
</script>
{% endblock %}

